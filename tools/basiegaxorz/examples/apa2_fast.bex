	disable screen
	cls
	pallettes pallette,1,0,16
	locate 0,0
	print "YET Another APA Drawing Plot Test"
	print "          With the power of assembly!"
	i=256
	for y=3 to 27
		for x=0 to 39
			drawtile i+8192,x,y
			i++
		next
	next
	p=1
	enable screen
	while 1
		a=0
		b=1
		c=0
		for d=98 to 0 step -2
			for i=0 to 1096 step 8
				reload sin_table,i
				readint y
				y=y-d
				reload cos_table,i
				readint x
				x=x-d
				gosub draw_dot_fast
				a=a+1
				if a=1200 then a=0:p=p+1 [and] 15
			next
		next
	wend
	end

draw_dot_fast:			' Draw Dot converted to assembly language
						' ~7000 Dots/second
	regmove.l p,d7
	regmove.l y,d0
	regmove.l x,d3
	asm
		move.l	d0,d1		; Calculate dy
		lsr.l	#3,d1
		mulu	#1280,d1
		move.l	d0,d2		; Calculate ddy
		and.l	#$07,d2
		lsl.l	#2,d2
		move.l	d3,d0		; Calculate dx
		lsr.l	#3,d3
		lsl.l	#5,d3
		move.l	d0,d4		; Caclulate ddx
		and.l	#$07,d4
		lsr.l	#2,d4
		lsl.l	#1,d4
		move.l	d0,d5		; Calculate dddx
		and.l	#$03,d5
		cmp.b	#0,d5
		bne		@1
		move.l	#4096,d5
		move.l	#$0FFF,d6
		bra		@4
@1:
		cmp.b	#1,d5
		bne		@2
		move.l	#256,d5
		move.l	#$F0FF,d6
		bra		@4
@2:
		cmp.b	#2,d5
		bne		@3
		move.l	#16,d5
		move.l	#$FF0F,d6
		bra		@4
@3:
		move.l	#1,d5
		move.l	#$FFF0,d6	; Calculate ddddx
@4:
		move.l	#8192,d0
		add.l	d1,d0
		add.l	d2,d0
		add.l	d3,d0
		add.l	d4,d0
		move	#$2700,sr
		lsl.l	#2,d0
		lsr.w	#2,d0
		swap	d0
		move.l	d0,($C00004)
		move.w	($C00000),d1
		and.l	d6,d1
		mulu	d5,d7
		add.l	d1,d7
		add.l	#$40000000,d0
		move.l	d0,($C00004)
		move.w	d7,($C00000)
		move	#$2000,sr
	end asm
	return

pallette:
	DATAINT	$0EEE,$00EE,$0E0E,$000E,$0EE0,$00E0,$0E00,$0888
	DATAINT	$0CCC,$0088,$0808,$0008,$0880,$0080,$0800,$0000


sin_table:
	dc.w  149,  150,  150,  151,  151,  152,  152,  153
	dc.w  153,  154,  155,  155,  156,  156,  157,  157
	dc.w  158,  158,  159,  160,  160,  161,  161,  162
	dc.w  162,  163,  163,  164,  164,  165,  166,  166
	dc.w  167,  167,  168,  168,  169,  169,  170,  170
	dc.w  171,  171,  172,  172,  173,  173,  174,  174
	dc.w  175,  175,  176,  176,  177,  177,  177,  178
	dc.w  178,  179,  179,  180,  180,  181,  181,  181
	dc.w  182,  182,  183,  183,  184,  184,  184,  185
	dc.w  185,  185,  186,  186,  187,  187,  187,  188
	dc.w  188,  188,  189,  189,  189,  190,  190,  190
	dc.w  191,  191,  191,  192,  192,  192,  192,  193
	dc.w  193,  193,  193,  194,  194,  194,  194,  195
	dc.w  195,  195,  195,  195,  196,  196,  196,  196
	dc.w  196,  196,  197,  197,  197,  197,  197,  197
	dc.w  197,  198,  198,  198,  198,  198,  198,  198
	dc.w  198,  198,  198,  198,  198,  198,  198,  198
	dc.w  198,  198,  198,  198,  198,  198,  198,  198
	dc.w  198,  198,  198,  198,  198,  198,  198,  198
	dc.w  198,  198,  198,  198,  198,  197,  197,  197
	dc.w  197,  197,  197,  197,  196,  196,  196,  196
	dc.w  196,  196,  195,  195,  195,  195,  195,  194
	dc.w  194,  194,  194,  193,  193,  193,  193,  192
	dc.w  192,  192,  191,  191,  191,  191,  190,  190
	dc.w  190,  189,  189,  189,  188,  188,  188,  187
	dc.w  187,  187,  186,  186,  185,  185,  185,  184
	dc.w  184,  183,  183,  183,  182,  182,  181,  181
	dc.w  181,  180,  180,  179,  179,  178,  178,  177
	dc.w  177,  176,  176,  176,  175,  175,  174,  174
	dc.w  173,  173,  172,  172,  171,  171,  170,  170
	dc.w  169,  169,  168,  168,  167,  166,  166,  165
	dc.w  165,  164,  164,  163,  163,  162,  162,  161
	dc.w  161,  160,  159,  159,  158,  158,  157,  157
	dc.w  156,  156,  155,  154,  154,  153,  153,  152
	dc.w  152,  151,  151,  150,  149,  149,  148,  148
	dc.w  147,  147,  146,  146,  145,  144,  144,  143
	dc.w  143,  142,  142,  141,  140,  140,  139,  139
	dc.w  138,  138,  137,  137,  136,  136,  135,  134
	dc.w  134,  133,  133,  132,  132,  131,  131,  130
	dc.w  130,  129,  129,  128,  128,  127,  127,  126
	dc.w  126,  125,  125,  124,  124,  123,  123,  122
	dc.w  122,  121,  121,  120,  120,  120,  119,  119
	dc.w  118,  118,  117,  117,  116,  116,  116,  115
	dc.w  115,  114,  114,  114,  113,  113,  112,  112
	dc.w  112,  111,  111,  111,  110,  110,  110,  109
	dc.w  109,  109,  108,  108,  108,  107,  107,  107
	dc.w  106,  106,  106,  106,  105,  105,  105,  105
	dc.w  104,  104,  104,  104,  103,  103,  103,  103
	dc.w  103,  102,  102,  102,  102,  102,  102,  101
	dc.w  101,  101,  101,  101,  101,  101,  100,  100
	dc.w  100,  100,  100,  100,  100,  100,  100,  100
	dc.w  100,  100,  100,  100,  100,  100,  100,  100
	dc.w  100,  100,  100,  100,  100,  100,  100,  100
	dc.w  100,  100,  100,  100,  100,  100,  100,  100
	dc.w  100,  101,  101,  101,  101,  101,  101,  101
	dc.w  101,  102,  102,  102,  102,  102,  103,  103
	dc.w  103,  103,  103,  104,  104,  104,  104,  104
	dc.w  105,  105,  105,  106,  106,  106,  106,  107
	dc.w  107,  107,  108,  108,  108,  108,  109,  109
	dc.w  109,  110,  110,  110,  111,  111,  112,  112
	dc.w  112,  113,  113,  113,  114,  114,  115,  115
	dc.w  115,  116,  116,  117,  117,  118,  118,  118
	dc.w  119,  119,  120,  120,  121,  121,  122,  122
	dc.w  123,  123,  124,  124,  125,  125,  126,  126
	dc.w  127,  127,  128,  128,  129,  129,  130,  130
	dc.w  131,  131,  132,  132,  133,  133,  134,  134
	dc.w  135,  135,  136,  136,  137,  138,  138,  139
	dc.w  139,  140,  140,  141,  141,  142,  143,  143
	dc.w  144,  144,  145,  145,  146,  146,  147,  148


cos_table:
	dc.w  199,  198,  198,  198,  198,  198,  198,  198
	dc.w  198,  198,  198,  198,  198,  198,  198,  198
	dc.w  198,  198,  197,  197,  197,  197,  197,  197
	dc.w  197,  197,  196,  196,  196,  196,  196,  195
	dc.w  195,  195,  195,  195,  194,  194,  194,  194
	dc.w  193,  193,  193,  193,  192,  192,  192,  192
	dc.w  191,  191,  191,  190,  190,  190,  189,  189
	dc.w  189,  188,  188,  188,  187,  187,  187,  186
	dc.w  186,  186,  185,  185,  184,  184,  184,  183
	dc.w  183,  182,  182,  182,  181,  181,  180,  180
	dc.w  179,  179,  178,  178,  178,  177,  177,  176
	dc.w  176,  175,  175,  174,  174,  173,  173,  172
	dc.w  172,  171,  171,  170,  170,  169,  169,  168
	dc.w  168,  167,  167,  166,  166,  165,  165,  164
	dc.w  163,  163,  162,  162,  161,  161,  160,  160
	dc.w  159,  159,  158,  157,  157,  156,  156,  155
	dc.w  155,  154,  154,  153,  152,  152,  151,  151
	dc.w  150,  150,  149,  148,  148,  147,  147,  146
	dc.w  146,  145,  144,  144,  143,  143,  142,  142
	dc.w  141,  141,  140,  139,  139,  138,  138,  137
	dc.w  137,  136,  136,  135,  135,  134,  133,  133
	dc.w  132,  132,  131,  131,  130,  130,  129,  129
	dc.w  128,  128,  127,  127,  126,  126,  125,  125
	dc.w  124,  124,  123,  123,  122,  122,  121,  121
	dc.w  120,  120,  120,  119,  119,  118,  118,  117
	dc.w  117,  116,  116,  116,  115,  115,  114,  114
	dc.w  114,  113,  113,  112,  112,  112,  111,  111
	dc.w  111,  110,  110,  110,  109,  109,  109,  108
	dc.w  108,  108,  107,  107,  107,  106,  106,  106
	dc.w  106,  105,  105,  105,  105,  104,  104,  104
	dc.w  104,  103,  103,  103,  103,  103,  102,  102
	dc.w  102,  102,  102,  101,  101,  101,  101,  101
	dc.w  101,  101,  101,  100,  100,  100,  100,  100
	dc.w  100,  100,  100,  100,  100,  100,  100,  100
	dc.w  100,  100,  100,  100,  100,  100,  100,  100
	dc.w  100,  100,  100,  100,  100,  100,  100,  100
	dc.w  100,  100,  100,  100,  100,  100,  101,  101
	dc.w  101,  101,  101,  101,  101,  101,  102,  102
	dc.w  102,  102,  102,  103,  103,  103,  103,  103
	dc.w  104,  104,  104,  104,  105,  105,  105,  105
	dc.w  106,  106,  106,  106,  107,  107,  107,  108
	dc.w  108,  108,  109,  109,  109,  110,  110,  110
	dc.w  111,  111,  111,  112,  112,  112,  113,  113
	dc.w  114,  114,  114,  115,  115,  116,  116,  116
	dc.w  117,  117,  118,  118,  119,  119,  120,  120
	dc.w  120,  121,  121,  122,  122,  123,  123,  124
	dc.w  124,  125,  125,  126,  126,  127,  127,  128
	dc.w  128,  129,  129,  130,  130,  131,  131,  132
	dc.w  132,  133,  133,  134,  135,  135,  136,  136
	dc.w  137,  137,  138,  138,  139,  139,  140,  141
	dc.w  141,  142,  142,  143,  143,  144,  144,  145
	dc.w  146,  146,  147,  147,  148,  148,  149,  150
	dc.w  150,  151,  151,  152,  152,  153,  153,  154
	dc.w  155,  155,  156,  156,  157,  157,  158,  159
	dc.w  159,  160,  160,  161,  161,  162,  162,  163
	dc.w  163,  164,  165,  165,  166,  166,  167,  167
	dc.w  168,  168,  169,  169,  170,  170,  171,  171
	dc.w  172,  172,  173,  173,  174,  174,  175,  175
	dc.w  176,  176,  177,  177,  178,  178,  178,  179
	dc.w  179,  180,  180,  181,  181,  182,  182,  182
	dc.w  183,  183,  184,  184,  184,  185,  185,  186
	dc.w  186,  186,  187,  187,  187,  188,  188,  188
	dc.w  189,  189,  189,  190,  190,  190,  191,  191
	dc.w  191,  192,  192,  192,  192,  193,  193,  193
	dc.w  193,  194,  194,  194,  194,  195,  195,  195
	dc.w  195,  195,  196,  196,  196,  196,  196,  197
	dc.w  197,  197,  197,  197,  197,  197,  197,  198
	dc.w  198,  198,  198,  198,  198,  198,  198,  198
	dc.w  198,  198,  198,  198,  198,  198,  198,  198
